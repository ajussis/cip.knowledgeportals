<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      tal:omit-tag="">
    <dl class="portlet portletRecent"
        i18n:domain="plone">
        <dt class="portletHeaderMember">
            <span class="portletTopLeft"></span>
            <a class="memberPortletTitle" href="/Members"
                i18n:translate="box_recent_changes">Most active members</a>
            <span class="portletTopRight"></span>
        </dt>

        <tal:defineThis define="users view/mostactivemembers;
                                membership context/portal_membership;
                                url python:'/'.join(here.getPhysicalPath()) + '/allmembers';">
            <tal:block tal:repeat="user users">
                <tal:defineAgain define="userName python:user[0];
                                         userObjects python:user[1];
                                         userImage python:user[2];">
                    <img src="#" tal:attributes="src userImage" width="30" style="margin:10px; float:left;" />
                    <h4 tal:define="url python:'/'.join(here.getPhysicalPath()) + '/author/'+userName;
                                    info python:membership.getMemberInfo(userName);
                                    fullname info/fullname">
                        <a tal:condition="python:len(fullname) != 0" href="#" tal:attributes="href url"><tal:block replace="fullname"/></a>
                        <a tal:condition="python:len(fullname) == 0" href="#" tal:attributes="href url"><tal:block replace="userName"/></a>
                    </h4>
                    <p>
                        Items created: <tal:contentThis content="userObjects"/>
                    </p>
                    <div style="clear:both;"></div>
                </tal:defineAgain>
            </tal:block>
            <p style="text-align:center">
                <a href="#" tal:attributes="href url" style="float:right">All members</a>
            </p>
        </tal:defineThis>
    <dd class="portletItem"
        tal:condition="not: view/recent_items"
        i18n:translate="box_recent_no_items">
        No items changed yet.
    </dd>
</dl>
</html>
