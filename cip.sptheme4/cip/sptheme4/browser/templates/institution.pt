<html metal:use-macro="here/main_template/macros/master">

<metal:block fill-slot="top_slot"
                 tal:define="disable_column_one python:request.set('disable_plone.leftcolumn',1);" />

    <metal:main_macro define-macro="main">
        <metal:main fill-slot="main">

            <div>
                <img class="titleBall" src="frontpageball.jpg" />
                <h1 class="titleSweetpotato">Institution:</h1>
                <h1 class="titleKnowledge" tal:content="context/Title">Sweetpotato</h1>
                <div class="lineBreak"></div>
                <div class="titleLine1"></div>
                <div class="titleLine2"></div>
                <div class="lineBreak"></div>
                <p style="margin-top:10px;" tal:content="context/Description"/>
            </div>

            <div class="lineBreak"></div>

            <h1>Information about the institution</h1>
            <div class="projectInfo">
                <p><span class="projectStart">Headquarters address:</span> <span tal:content="python:context.getHeadquarters()"></span></p>
                <p><span class="projectStart">City:</span> <span tal:content="python:context.getCity()"></span></p>
                <p><span class="projectStart">Country:</span> <span tal:content="python:context.getCountry()"></span></p>
                <p><span class="projectEnd">Website:</span> <span tal:content="python:context.getWebsite()"></span></p>
                <p><span class="projectEnd">Telephone:</span> <span tal:content="python:context.getNumber()"></span></p>
                <div class="lineBreak"></div>

                <!--div class="projectInfoBottom"></div-->
            </div>
            <div style="width:230px; float:left;">
                <div class="projectMembers projectColumns">
                    <div tal:define="areas python:context.getArea();
                                     areasL python:len(areas);
                                     areas python:areas[:areasL-1];"
                         class="projectColumns">
                        <h2 class="projectH2">Area</h2>
                        <ol>
                            <tal:block tal:repeat="area areas">
                                <li tal:content="area" />
                            </tal:block>
                        </ol>
                    </div>
                </div>
            </div>

            <div style="width:250px; float:left;">
                <div class="projectMembers projectColumns">
                    <div tal:define="areas python:context.getArea()" class="projectColumns">
                        <h2 class="projectH2">Members</h2>
                        <ul style="margin-left:30px;" tal:define="members python:context.getUsers();
                                                                  membership context/portal_membership;">
                            <tal:bb tal:repeat="jes members">
                                <li style="display:list-item; list-style-type:square;" 
                                    tal:define="osoite python:'/sweetpotato3/author' + '/' + jes;
                                                info python:membership.getMemberInfo(jes);
                                                fullname info/fullname">
                                    <a href="#" tal:attributes="href osoite" tal:content="fullname"></a>
                                </li>
                            </tal:bb>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="lineBreak"></div>

            <tal:foldercontents define="contentFilter contentFilter|request/contentFilter|nothing;
                                        limit_display limit_display|request/limit_display|nothing;
                                        more_url more_url|request/more_url|string:folder_contents;
                                        folderContents python:here.getFolderContents(contentFilter, batch=True, b_size=limit_display or 100);
                                        use_view_action site_properties/typesUseViewActionInListings|python:();
                                        over_limit python: limit_display and len(folderContents) > limit_display;
                                        folderContents python: (over_limit and folderContents[:limit_display]) or folderContents;
                                        batch folderContents;
                                        b_size python:12;
                                        b_start python:0;
                                        b_start request/b_start | b_start;
                                        member here/id;
                                        canEdit python:checkPermission('Modify portal content', here);
                                        cFolder python:'/'.join(here.getPhysicalPath()) + '/' + 'createObject?type_name=Folder';
                                        cEvent python:'/'.join(here.getPhysicalPath()) + '/' + 'createObject?type_name=Event';
                                        cDoc python:'/'.join(here.getPhysicalPath()) + '/' + 'createObject?type_name=Document';
                                        cGallery python:'/'.join(here.getPhysicalPath()) + '/' + 'createObject?type_name=Gallery+Folder';
                                        cFile python:'/'.join(here.getPhysicalPath()) + '/' + 'createObject?type_name=File';
                                        cPrivate python:'/'.join(here.getPhysicalPath()) + '/' + 'createObject?type_name=b-org+Project';
                                        upload python:'/'.join(here.getPhysicalPath()) + '/' + '@@upload';">
                <h1>Documentation</h1>
                <div tal:condition="canEdit" style="float:right; margin-top:-41px;">
                    <p style="float:left; margin:0 10px;">Add content</p>
                    <ul style="float:left; list-style:none outside none;">
                        <li class="projectLi"><a href="#" tal:attributes="href cDoc">Page</a></li>
                        <li class="projectLi"><a href="#" tal:attributes="href cFolder">Folder</a></li>
                        <li class="projectLi"><a href="#" tal:attributes="href cEvent">Event</a></li>
                        <li class="projectLi"><a href="#" tal:attributes="href cGallery">Gallery</a></li>
                        <li class="projectLi"><a href="#" tal:attributes="href cFile">File</a></li>
                    </ul>
                    <ul style="float:left; list-style:none outside none; margin-left:15px;">
                        <li class="projectLi"><a href="#" tal:attributes="href upload">Upload many files</a></li>
                    </ul>
                    <ul style="float:left; list-style:none outside none; margin-left:15px;">
                        <li class="projectLi"><a href="#" tal:attributes="href cPrivate">Private Project Space</a></li>
                    </ul>
                </div>
                <div class="lineBreak"></div>
                <tal:listing condition="folderContents"
                             define="path python:'/'.join(here.getPhysicalPath());
                                     folds python:context.portal_catalog(path={'query' : path, 'depth' : 1}, portal_type = 'Folder');
                                     docs python:context.portal_catalog(path={'query' : path, 'depth' : 1}, portal_type = 'Document');
                                     galleries python:context.portal_catalog(path={'query' : path, 'depth' : 1}, portal_type = 'Gallery Folder');
                                     private python:context.portal_catalog(path={'query' : path, 'depth' : 1}, portal_type = 'b-org Project');
                                     news python:context.portal_catalog(path={'query' : path, 'depth' : 1}, portal_type = 'News Item');
                                     files python:context.portal_catalog(path={'query' : path, 'depth' : 1}, portal_type = 'File');
                                     toLocalizedTime nocall:context/@@plone/toLocalizedTime;">
                    <div class="projectContents" style="width:720px;">
                        <div style="margin-left:20px;">
                            <div tal:condition="folds" style="margin-top:10px; width:680px;">
                                <img style="float:left; padding:5px 50px 0 20px; width:100px;" src="spfolder2.jpg"/>
                                <h2>Folders</h2>
                                <div tal:repeat="item folds">
                                    <tal:defs define="item_url item/getURL|item/absolute_url;
                                                             item_title_or_id item/pretty_title_or_id;
                                                             item_modified item/ModificationDate;
                                                             item_created item/CreationDate;
                                                             item_icon python:plone_view.getIcon(item);">
                                        <img tal:replace="structure item_icon/html_tag" />
                                        <a href="#" tal:attributes="href item_url"
                                           tal:content="item_title_or_id">
                                            <tal:block replace="item_title_or_id" />
                                        </a>
                                        <span style="font-size:11px; margin-left:20px;" tal:content="python:toLocalizedTime(item_created,long_format=0)" />
                                    </tal:defs>
                                </div>
                            </div>
                            <div class="lineBreak"></div>
                            <div tal:condition="news" style="margin-top:10px;">
                                <img style="float:left; padding:5px 50px 0 20px; width:100px;" src="spnews.png"/>
                                <h2>News</h2>
                                <div tal:repeat="item news">
                                    <tal:defs define="item_url item/getURL|item/absolute_url;
                                                             item_title_or_id item/pretty_title_or_id;
                                                             item_modified item/ModificationDate;
                                                             item_icon python:plone_view.getIcon(item);">
                                        <img tal:replace="structure item_icon/html_tag" />
                                        <a href="#" tal:attributes="href item_url" style="margin-right:10px;"
                                           tal:content="item_title_or_id">
                                            <tal:block replace="item_title_or_id" />
                                        </a>
                                        |<span style="font-size:11px; margin-left:20px;" tal:content="python:toLocalizedTime(item_modified,long_format=0)" />
                                    </tal:defs>
                                </div>
                            </div>
                            <div class="lineBreak"></div>
                            <div tal:condition="galleries" style="margin-top:10px;">
                                <img style="float:left; padding:5px 50px 0 20px; width:100px;" src="spgallery.png"/>
                                <h2>Image Galleries</h2>
                                <div tal:repeat="item galleries">
                                    <tal:defs define="item_url item/getURL|item/absolute_url;
                                                      item_title_or_id item/pretty_title_or_id;
                                                      item_modified item/ModificationDate;
                                                      item_icon python:plone_view.getIcon(item);">
                                        <img tal:replace="structure item_icon/html_tag" />
                                        <a href="#" tal:attributes="href item_url" style="margin-right:10px;"
                                           tal:content="item_title_or_id">
                                            <tal:block replace="item_title_or_id" />
                                        </a>
                                        |<span style="font-size:11px; margin-left:20px;" tal:content="python:toLocalizedTime(item_modified,long_format=0)" />
                                    </tal:defs>
                                </div>
                            </div>
                            <div class="lineBreak"></div>
                            <div tal:condition="docs" style="margin-top:10px;">
                                <img style="float:left; padding:5px 50px 0 20px; width:100px;" src="spdocument.png"/>
                                <h2>Pages</h2>
                                <div tal:repeat="item docs">
                                    <tal:defs define="item_url item/getURL|item/absolute_url;
                                                             item_title_or_id item/pretty_title_or_id;
                                                             item_modified item/ModificationDate;
                                                             item_icon python:plone_view.getIcon(item);">
                                        <img tal:replace="structure item_icon/html_tag" />
                                        <a href="#" tal:attributes="href item_url" style="margin-right:10px;"
                                           tal:content="item_title_or_id">
                                            <tal:block replace="item_title_or_id" />
                                        </a>
                                        |<span style="font-size:11px; margin-left:20px;" tal:content="python:toLocalizedTime(item_modified,long_format=0)" />
                                    </tal:defs>
                                </div>
                            </div>
                            <div class="lineBreak"></div>
                            <div tal:condition="files" style="margin-top:10px;">
                                <img style="float:left; padding:5px 50px 0 20px; width:100px;" src="spfile.png"/>
                                <h2>Files</h2>
                                <div tal:repeat="item files" style="margin-left:172px;">
                                    <tal:defs define="item_url item/getURL|item/absolute_url;
                                                      item_url2 python:item_url+'/view';
                                                             item_title_or_id item/pretty_title_or_id;
                                                             item_modified item/ModificationDate;
                                                             item_icon python:plone_view.getIcon(item);">
                                        <img tal:replace="structure item_icon/html_tag" />
                                        <a href="#" tal:attributes="href item_url2" style="margin-right:10px;"
                                           tal:content="item_title_or_id">
                                            <tal:block replace="item_title_or_id" />
                                        </a>
                                        |<span style="font-size:11px; margin-left:20px;" tal:content="python:toLocalizedTime(item_modified,long_format=0)" />
                                        <a style="margin-left:10px;" href="#" tal:attributes="href item_url">
                                        <img src="arrowDown.gif"/></a><br />

                                    </tal:defs>
                                </div>
                            </div>
                            <div class="lineBreak"></div>
                        </div>
                    </div>
                </tal:listing>
                <p tal:condition="python:not folderContents">
                    <i>There are no documents added</i>
                </p>
            </tal:foldercontents>




            <div class="lineBreak"></div>

            <tal:getInfo define="info context/getInfo">
                <div tal:condition="info">
                    <h1>More information</h1>
                    <div tal:replace="structure here/getInfo" />
                </div>
            </tal:getInfo>

        </metal:main>
    </metal:main_macro>
</html>
